<article class="d-flex flex-column justify-content-space-between">
  <header class="d-flex gap-3 justify-content-center align-items-center">
    <h2 class="title">Mis últimos trabajos</h2>
    <button
      class="btn btn-outline-success"
      type="button"
      aria-label="agregar nuevo trabajo"
      (click)="modalAgregar.toggleModal()"
      *ngIf="estaLogeado()"
    >
      <i class="fa fa-plus" aria-hidden="true"></i>
    </button>
  </header>
  <section *ngIf="trabajos.length > 0; else noJobs">
    <article
      class="row text-center border rounded-top p-3 m-2"
      *ngFor="let trabajo of this.trabajos"
    >
      <header class="d-flex gap-3 align-items-center justify-content-center">
        <h4>{{ trabajo.job }}</h4>
      </header>
      <section>
        <img [src]="trabajo.imgSrc" [alt]="trabajo.description" width="200px" />
        <p>{{ trabajo.description }}</p>
      </section>
      <footer class="d-flex gap-3 justify-content-center" *ngIf="estaLogeado()">
        <button
          class="btn btn-outline-secondary"
          type="button"
          aria-label="editar trabajo"
          (click)="seleccionarTrabajo(trabajo); modalEditar.toggleModal()"
        >
          <i class="fa fa-pencil" aria-hidden="true"></i>
        </button>
        <button
          class="btn btn-outline-danger"
          type="button"
          aria-label="eliminar trabajo"
          (click)="seleccionarTrabajo(trabajo); modalEliminar.toggleModal()"
        >
          <i class="fa fa-trash-can" aria-hidden="true"></i>
        </button>
      </footer>
    </article>
  </section>
</article>
<app-modal #modalAgregar [titulo]="'Agregar Trabajo'">
  <app-job-form
    (formSubmitted)="agregarTrabajo($event); modalAgregar.toggleModal()"
  ></app-job-form>
</app-modal>

<app-modal #modalEditar [titulo]="'Editar Trabajo'">
  <app-job-form
    [jobData]="this.trabajoSeleccionado"
    (formSubmitted)="editarTrabajo($event); modalEditar.toggleModal()"
  ></app-job-form>
</app-modal>

<app-modal #modalEliminar [titulo]="'Eliminar Formación'">
  <p *ngIf="this.trabajoSeleccionado">
    ¿Realmente deseas eliminar <b>{{ this.trabajoSeleccionado.job }}</b
    >?
  </p>
  <button
    *ngIf="this.trabajoSeleccionado"
    class="btn btn-danger m-2"
    type="submit"
    (click)="
      eliminarTrabajo(this.trabajoSeleccionado.id); modalEliminar.toggleModal()
    "
  >
    Eliminar
  </button>
</app-modal>
<ng-template #noJobs>
  <p class="text-center">- No pudimos cargar los trabajos en este momento. -</p>
</ng-template>
